# Description: Miscellaneous system utilities
# URL:         http://userweb.kernel.org/~kzak/util-linux-ng/
# Maintainer:  CRUX System Team, core-ports at crux dot nu
# Arch Maintainer: Lucas Hazel, lucas at die dot net dot au
# Depends on:  util-linux-ng ncurses-compat32 zlib-compat32

name=util-linux-ng-compat32
version=2.16-rc1
release=1
source=(http://ftp.kernel.org/pub/linux/utils/util-linux-ng/v2.16/util-linux-ng-$version.tar.bz2)

build() {
    cd util-linux-ng-$version

    ./configure --prefix=/usr \
                --libdir=/usr/lib32 \
                --mandir=/usr/man \
                --disable-{nls,wall} \
                --enable-{write,rdev,raw,kill}
    make -j1 
    make DESTDIR=$PKG install

    mv $PKG/usr/lib/* $PKG/usr/lib32
    rmdir $PKG/usr/lib

    install -d $PKG/lib32
    mv $PKG/usr/lib32/lib*.so* $PKG/lib32
    ln -s /lib32/libblkid.so $PKG/usr/lib32/libblkid.so
    ln -s /lib32/libuuid.so $PKG/usr/lib32/libuuid.so

    rm -rf $PKG/{bin,sbin,etc,var,usr/{bin,sbin,include,man,share}}
}
